<!DOCTYPE html>

<html>

<head>
  <title>Parcel Sandbox</title>
  <meta charset="UTF-8" />

</head>

<body>
  <h1>Hello World</h1>
  <script src="https://cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="//cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="//cdn.jsdelivr.net/hls.js/latest/hls.min.js"></script>

  <video id="video" src='/video/playlist.m3u8' style="width: 800px; height: 600px;" controls="controls" muted="muted"
    autoplay="autoplay" playsinline='playsinline'>
    <!-- <source src='/video/playlist.m3u8'> -->
    <!-- type='application/x-mpegURL' -->
  </video>
  <!-- <img src="/Icon_3d.png" alt=""> -->

  <!-- <script>
    if (Hls.isSupported()) {
      var video = document.getElementById("video");
      var hls = new Hls();
      hls.loadSource("/video/360_out.m3u8");
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, function () {
        video.play();
      });
    }
  </script> -->

  <button onclick='changeResolution(0)'>ボタン360</button>
  <button onclick='changeResolution(3)'>ボタン1080</button>



  <script>
    function changeResolution(n) {
      console.log(n)
      hls.currentLevel = n

      setTimeout(() => {
        console.log(hls.nextLevel)
      }, 1000)
    }

    var hls = new Hls();

    if (Hls.isSupported()) {
      var video = document.getElementById('video');
      // bind them together
      hls.attachMedia(video);
      // ATTACHED 取り付けられた
      hls.on(Hls.Events.MEDIA_ATTACHED, function () {
        console.log("video and hls.js are now bound together !");
        hls.loadSource("/video/playlist.m3u8");
        // PARSED 渡された
        hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
          console.log(event); //hlsManifestParsed
          console.log("manifest loaded, found " + data.levels.length + " quality level");
          console.log(data.levels) // 4
          hls.currentLevel()
          // hls.autoLevelEnabled = false;
          // hls.currentLevel = 3;
          video.play();
        });
      });
    }
  </script>

  <br />


</body>

</html>